<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade">

    <title>Nix Pills Notes - Norman&#x27;s Blog</title>
    <meta name="description" content="Notes and thoughts on software, Japan, and etc.">

    <link rel="stylesheet" href="/main.css">

    <link rel="preload" href=https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;font-awesome&#x2F;6.1.1&#x2F;css&#x2F;brands.min.css as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href=https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;font-awesome&#x2F;6.1.1&#x2F;css&#x2F;brands.min.css></noscript>

    
    <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    

    
    
    <meta property="og:locale" content="en_US">
    
    <meta property="og:title" content="Nix Pills Notes">
    
    <meta property="og:type" content="article">
    <meta property="article:author" content="/about/">
    <meta property="article:published_time" content="2022-08-05">
    
    
    <meta property="article:tag" content="nix">
    
    <meta property="article:tag" content="nixos">
    
    
    
    
    <meta property="og:url" content="/blog/nix-pills/">
    
    


    
  

  
    <title>Nix Pills Notes</title>
  

  <meta name="author" content="Norman Sue">

  

  
    <link rel="canonical" href="/blog/nix-pills/">
  

  

  
    <link rel="prev" href="/blog/nixos-in-vmware-fusion/">
  

  

  
    <meta name="twitter:card" content="summary">
  

  
    <meta property="twitter:title" content="Nix Pills Notes">
  

  

  

  

  

  <script type="application/ld+json">
  {
    "author": {
      "@type":"Person",
      "name":"Norman Sue",
    },
    "url":"https://www.normful.com",
    "@context":"https://schema.org",
    "@type":"WebPage",
    
      
      
        "headline":"Nix Pills Notes"
      
      
      
        "datePublished":"2022-08-05T00:00:00+00:00",
      
      "mainEntityOfPage":{
        "@type":"WebPage",
        "@id":"https://www.normful.com"
      },
    
  }
</script>


</head>
<body>
<div class="container">
    
    
    <header>
        <h1 class="site-header">
            <a href="">Norman&#x27;s Blog</a>
        </h1>
        <nav>
            <ul>
            
            
                
                <li><a  href="&#x2F;projects">Projects</a></li>
            
                
                <li><a class="active" href="&#x2F;blog">Blog</a></li>
            
                
                <li><a  href="&#x2F;tags">Tags</a></li>
            
                
                <li><a  href="&#x2F;about">About</a></li>
            
            
            </ul>
        </nav>
    </header>
    
    

<article class="post">
    
    
    
        
        <header>
            <h1>Nix Pills Notes</h1>
        </header>
        
    <div class="article-info">
        
        
        <div class="article-date">August  5, 2022 â—¦ 8 min â—¦ </div>
        
        <div class="article-taxonomies">
            
            
                <ul class="article-tags">
                    
                    <li><a href="/tags/nix/">#nix</a></li>
                    
                    <li><a href="/tags/nixos/">#nixos</a></li>
                    
                </ul>
            
        </div>
    </div>

    
    
    <div class="content">
        <p>Succinct notes from reading https://nixos.org/guides/nix-pills/ and various Nix manual pages.</p>
<h1 id="Nix_Store">Nix Store<a class="zola-anchor" href="#Nix_Store" aria-label="Anchor link for: Nix_Store">ðŸ”—</a></h1>
<ul>
<li>Never change <code>/nix/store</code> manually.</li>
</ul>
<h2 id="nix-store_command"><code>nix-store</code> command<a class="zola-anchor" href="#nix-store_command" aria-label="Anchor link for: nix-store_command">ðŸ”—</a></h2>
<p><a href="https://nixos.org/manual/nix/stable/command-ref/nix-store.html">https://nixos.org/manual/nix/stable/command-ref/nix-store.html</a></p>
<ul>
<li>Manipulates or queries the Nix store</li>
</ul>
<h3 id="Operation_--gc">Operation <code>--gc</code><a class="zola-anchor" href="#Operation_--gc" aria-label="Anchor link for: Operation_--gc">ðŸ”—</a></h3>
<h3 id="Operation_--realise_(-r)">Operation <code>--realise</code> (<code>-r</code>)<a class="zola-anchor" href="#Operation_--realise_(-r)" aria-label="Anchor link for: Operation_--realise_(-r)">ðŸ”—</a></h3>
<ul>
<li>Ensures output paths of a derivation are valid</li>
</ul>
<h3 id="Operation_--query_(-q)">Operation <code>--query</code> (<code>-q</code>)<a class="zola-anchor" href="#Operation_--query_(-q)" aria-label="Anchor link for: Operation_--query_(-q)">ðŸ”—</a></h3>
<h4 id="Querying_requisites">Querying requisites<a class="zola-anchor" href="#Querying_requisites" aria-label="Anchor link for: Querying_requisites">ðŸ”—</a></h4>
<p>To print the closure, i.e. the dependencies, of <code>man</code> (all equivalent commands):</p>
<pre data-lang="sh" class="language-sh "><code class="language-sh" data-lang="sh">nix-store -qR `which man`
nix-store --query --requisites `which man`
nix-store --query --requisites ~&#x2F;.nix-profile&#x2F;bin&#x2F;man
</code></pre>
<p>To show the closure of <code>man</code> in tree form:</p>
<pre data-lang="sh" class="language-sh "><code class="language-sh" data-lang="sh">nix-store --query --tree `which man`
</code></pre>
<h1 id="User_Environments">User Environments<a class="zola-anchor" href="#User_Environments" aria-label="Anchor link for: User_Environments">ðŸ”—</a></h1>
<ul>
<li>A user environment is a <code>/nix/store/&lt;hash&gt;-user-environment</code> folder</li>
</ul>
<h2 id="Manifest_of_a_User_Environment">Manifest of a User Environment<a class="zola-anchor" href="#Manifest_of_a_User_Environment" aria-label="Anchor link for: Manifest_of_a_User_Environment">ðŸ”—</a></h2>
<ul>
<li><code>/nix/store/&lt;hash&gt;-user-environment/manifest.nix (symlink) -&gt; /nix/store/hash-env-manifest.nix (file)</code></li>
<li>Current manifest: <code>~/.nix-profile/manifest.nix</code></li>
</ul>
<h1 id="Derivations">Derivations<a class="zola-anchor" href="#Derivations" aria-label="Anchor link for: Derivations">ðŸ”—</a></h1>
<p>A Nix derivation:</p>
<ul>
<li>is stored at <code>/nix/store/hash-name</code></li>
<li>is identified by its hash</li>
<li>can have the same name as another derivation, but with a different hash</li>
<li>is ambiguous if specified by its name only</li>
<li>has static dependencies, with dependencies hardcoded in them (even hardcoded in binaries)</li>
<li>is often interchangeably referred to as a package</li>
</ul>
<p>If a derivation X depends on a derivation Y, then it always depends on it. A version of X which depended on Z would be a different derivation.</p>
<p>Upgrading a library like glibc means recompiling all applications, because the glibc path is hardcoded.</p>
<p>There's no such global path for plugins, so each application must know the specific Nix store path to each plugin.</p>
<h2 id="Attribute_paths_of_a_derivation">Attribute paths of a derivation<a class="zola-anchor" href="#Attribute_paths_of_a_derivation" aria-label="Anchor link for: Attribute_paths_of_a_derivation">ðŸ”—</a></h2>
<ul>
<li>Attribute paths: unambiguous</li>
<li>Derivation names: ambiguous</li>
</ul>
<h2 id="Closure_of_a_derivation">Closure of a derivation<a class="zola-anchor" href="#Closure_of_a_derivation" aria-label="Anchor link for: Closure_of_a_derivation">ðŸ”—</a></h2>
<ul>
<li>Is a list of all a derivation's dependencies, recursively</li>
</ul>
<h1 id="Nix_database">Nix database<a class="zola-anchor" href="#Nix_database" aria-label="Anchor link for: Nix_database">ðŸ”—</a></h1>
<ul>
<li>Is a SQLite database at <code>/nix/var/nix/db</code> that tracks dependencies between derivations.</li>
</ul>
<h1 id="Nix_Profiles">Nix Profiles<a class="zola-anchor" href="#Nix_Profiles" aria-label="Anchor link for: Nix_Profiles">ðŸ”—</a></h1>
<p>A Nix profile is:</p>
<ul>
<li>a set of derivations (a set of packages)</li>
<li>versioned using a a sequence of user environments called generations</li>
</ul>
<p><code>$HOME/.nix-profile</code> is:</p>
<ul>
<li>The user's current profile</li>
<li>Usually is a symlink to <code>/nix/var/nix/profiles/default</code></li>
</ul>
<h2 id="nix_profile_command"><code>nix profile</code> command<a class="zola-anchor" href="#nix_profile_command" aria-label="Anchor link for: nix_profile_command">ðŸ”—</a></h2>
<ul>
<li><code>nix profile history</code></li>
<li><code>nix profile list</code></li>
</ul>
<h1 id="Nix_expressions">Nix expressions<a class="zola-anchor" href="#Nix_expressions" aria-label="Anchor link for: Nix_expressions">ðŸ”—</a></h1>
<p>Nix expressions:</p>
<ul>
<li>describe packages and how to build packages</li>
<li>are all at <a href="https://github.com/NixOS/nixpkgs">https://github.com/NixOS/nixpkgs</a></li>
</ul>
<h1 id="Nix_channels">Nix channels<a class="zola-anchor" href="#Nix_channels" aria-label="Anchor link for: Nix_channels">ðŸ”—</a></h1>
<p>A Nix channel:</p>
<ul>
<li>is a set of downloadable packages and expressions.</li>
<li>is a URL pointing to a place containing Nix expressions.</li>
</ul>
<h2 id="nix-channel_command"><code>nix-channel</code> command<a class="zola-anchor" href="#nix-channel_command" aria-label="Anchor link for: nix-channel_command">ðŸ”—</a></h2>
<ul>
<li>Manages Nix channels</li>
</ul>
<p><a href="https://nixos.org/manual/nix/stable/command-ref/nix-channel.html">https://nixos.org/manual/nix/stable/command-ref/nix-channel.html</a></p>
<h1 id="Common_Environment_Variables">Common Environment Variables<a class="zola-anchor" href="#Common_Environment_Variables" aria-label="Anchor link for: Common_Environment_Variables">ðŸ”—</a></h1>
<h2 id="NIX_PATH"><code>NIX_PATH</code><a class="zola-anchor" href="#NIX_PATH" aria-label="Anchor link for: NIX_PATH">ðŸ”—</a></h2>
<p><a href="https://nixos.org/manual/nix/stable/command-ref/env-common.html#env-NIX_PATH">https://nixos.org/manual/nix/stable/command-ref/env-common.html#env-NIX_PATH</a></p>
<h1 id="~/.nix-defexpr"><code>~/.nix-defexpr</code><a class="zola-anchor" href="#~&#x2F;.nix-defexpr" aria-label="Anchor link for: ~&#x2F;.nix-defexpr">ðŸ”—</a></h1>
<ul>
<li>Has several valid file or directory formats. See <code>nix-env --help</code></li>
</ul>
<h1 id="nix-env_command"><code>nix-env</code> command<a class="zola-anchor" href="#nix-env_command" aria-label="Anchor link for: nix-env_command">ðŸ”—</a></h1>
<ul>
<li>Manages environments, profiles and their generations</li>
</ul>
<p><a href="https://nixos.org/manual/nix/stable/command-ref/nix-env.html">https://nixos.org/manual/nix/stable/command-ref/nix-env.html</a></p>
<h2 id="Operation_--install_(-i)">Operation <code>--install</code> (<code>-i</code>)<a class="zola-anchor" href="#Operation_--install_(-i)" aria-label="Anchor link for: Operation_--install_(-i)">ðŸ”—</a></h2>
<ul>
<li><code>nix-env -iA &lt;attribute paths selecting attributes from the top-level Nix expression&gt;</code>
<ul>
<li>Unambiguous, faster, preferred</li>
</ul>
</li>
<li><code>nix-env -i &lt;derivation names of active Nix expression&gt;</code>
<ul>
<li>Possibly ambiguous</li>
</ul>
</li>
<li><code>--dry-run</code> flag</li>
<li>By default, all outputs of a derivation are installed.</li>
</ul>
<h2 id="Operation_--upgrade">Operation <code>--upgrade</code><a class="zola-anchor" href="#Operation_--upgrade" aria-label="Anchor link for: Operation_--upgrade">ðŸ”—</a></h2>
<ul>
<li>
<p><code>nix-env -u</code></p>
<ul>
<li>Upgrades everything</li>
<li>Specifically, it creates a new user environment, based on the current generation of the active profile, with newer versions of all derivations </li>
</ul>
</li>
<li>
<p><code>nix-env -u -A nixpkgs.gcc</code> is an example of upgrading one package</p>
</li>
</ul>
<h2 id="Operation_--uninstall">Operation <code>--uninstall</code><a class="zola-anchor" href="#Operation_--uninstall" aria-label="Anchor link for: Operation_--uninstall">ðŸ”—</a></h2>
<h2 id="Operation_--query_(-q)-1">Operation <code>--query</code> (<code>-q</code>)<a class="zola-anchor" href="#Operation_--query_(-q)-1" aria-label="Anchor link for: Operation_--query_(-q)-1">ðŸ”—</a></h2>
<ul>
<li><code>nix-env -q --out-path</code> prints output paths of all derivations of this user's profile's current generation</li>
</ul>
<h1 id="Nix_language">Nix language<a class="zola-anchor" href="#Nix_language" aria-label="Anchor link for: Nix_language">ðŸ”—</a></h1>
<p>In the Nix language:</p>
<ul>
<li>There are no statements.</li>
<li>There are only expressions.</li>
<li>Values are immutable.</li>
<li>It's all about creating derivations, which are really just sets of attributes to be passed to build scripts.</li>
</ul>
<h2 id="Strings">Strings<a class="zola-anchor" href="#Strings" aria-label="Anchor link for: Strings">ðŸ”—</a></h2>
<p>Things coerceable to a string:</p>
<ul>
<li>string</li>
<li>path</li>
<li>derivation</li>
</ul>
<p>You cannot mix strings and integers; you must first do the conversion.</p>
<p><code>${expr}</code> is called antiquotation</p>
<p>Multiline strings:</p>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">nix-repl&gt; &quot;first
          second
          third&quot;
&quot;first\n\second\n\third&quot;
</code></pre>
<p>Indented strings:</p>
<pre><code>nix-repl&gt; &#x27;&#x27;
          a
          b
          &#x27;&#x27;
&quot;a\nb\n&quot;
</code></pre>
<p>Indented strings using <code>''</code> are common for shell scripts:</p>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">stdenv.mkDerivation {
  ...
  postInstall =
    &#x27;&#x27;
      mkdir $out&#x2F;bin $out&#x2F;etc
      cp foo $out&#x2F;bin
      echo &quot;Hello World&quot; &gt; $out&#x2F;etc&#x2F;foo.conf
      ${if enableBar then &quot;cp bar $out&#x2F;bin&quot; else &quot;&quot;}
    &#x27;&#x27;;
  ...
}
</code></pre>
<p>Escaping <code>${...}</code> in <code>''</code> is done with <code>''</code>:</p>
<pre><code>nix-repl&gt; &#x27;&#x27;test &#x27;&#x27;${foo} test&#x27;&#x27;
&quot;test ${foo} test&quot;
</code></pre>
<p>URIs can be written without surrounding <code>&quot;</code>, but is considered an <a href="https://nix.dev/anti-patterns/language#unquoted-urls">anti-pattern</a>.</p>
<h2 id="Paths">Paths<a class="zola-anchor" href="#Paths" aria-label="Anchor link for: Paths">ðŸ”—</a></h2>
<p>A path must have at least one <code>/</code>.</p>
<p>A path can be specified between angle brackets, e.g. <code>&lt;nixpkgs&gt;</code>.</p>
<pre><code>nix-repl&gt; :t &lt;nixpkgs&gt;
a path
</code></pre>
<p>However, <code>&lt;nixpkgs&gt;</code> is <a href="https://nix.dev/anti-patterns/language#search-path">not reproducible</a> unless Nixpkgs is <a href="https://nix.dev/reference/pinning-nixpkgs">pinned</a>.</p>
<p>A path to the current directory:</p>
<pre><code>nix-repl&gt; :t .&#x2F;.
a path
</code></pre>
<p>However, <code>./.</code> is an <a href="https://nix.dev/anti-patterns/language#attr1-attr2-merge-operator">anti-pattern</a> because it relies on the name of the folder where the code was built. Use the <code>builtins.path</code> function instead.</p>
<p>A path containing antiquotation:</p>
<pre><code>nix-repl&gt; foo = &quot;x&quot;

nix-repl&gt; :t .&#x2F;${foo}nix
a path
</code></pre>
<h2 id="Lists">Lists<a class="zola-anchor" href="#Lists" aria-label="Anchor link for: Lists">ðŸ”—</a></h2>
<p>Example:</p>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">[ 123 .&#x2F;foo.nix &quot;abc&quot; (f { x = y; }) ]
</code></pre>
<p>A list element that is the result of a function call, must be enclosed in round parentheses.</p>
<p>Lists are immutable, like everything else in Nix.</p>
<p>Adding or removing elements from a list is possible, but will return a new list.</p>
<p>Lists are lazy in values and strict in length.</p>
<h2 id="Sets_(a.k.a._attribute_sets)">Sets (a.k.a. attribute sets)<a class="zola-anchor" href="#Sets_(a.k.a._attribute_sets)" aria-label="Anchor link for: Sets_(a.k.a._attribute_sets)">ðŸ”—</a></h2>
<p>Sets are the core of the language.</p>
<pre><code>nix-repl&gt; :t {unquoted=&quot;b&quot;;        &quot;quoted&quot; = &quot;d&quot;; }
a set
</code></pre>
<p>A set is a list of name/value pairs (called attributes) enclosed in curly braces.</p>
<p>Each value is an expression terminated by a semicolon.</p>
<p>Attribute names are strings, and they may be unquoted.</p>
<p>Attribute ordering is irrelevant.</p>
<p>Attribute names may occur only once.</p>
<p>Attributes can be selected from a set using the <code>.</code> operator.</p>
<p>The <code>or</code> keyword provides a default value in an attribute selection.</p>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">{ foo = 123; }.${bar} or 456
</code></pre>
<p>This will evaluate to 123 if bar evaluates to &quot;foo&quot; when coerced to a string and 456 otherwise (again assuming bar is antiquotable).</p>
<p>Inside a set, you cannot normally refer to elements of the same set:</p>
<pre><code>nix-repl&gt; { a = 3; b = a+4; }
error: undefined variable `a&#x27; at (string):1:10
</code></pre>
<h3 id="Recursive_Sets_(a.k.a._Recursive_Attribute_Sets):_rec">Recursive Sets (a.k.a. Recursive Attribute Sets): <code>rec</code><a class="zola-anchor" href="#Recursive_Sets_(a.k.a._Recursive_Attribute_Sets):_rec" aria-label="Anchor link for: Recursive_Sets_(a.k.a._Recursive_Attribute_Sets):_rec">ðŸ”—</a></h3>
<pre><code>nix-repl&gt; rec { a = 3; b = a+4; }
{ a = 3; b = 7; }
</code></pre>
<p>In a recursive set, attributes are added to the lexical scope of that same set.</p>
<p>Can cause an infinite recursion error if used improperly.</p>
<p>Using <code>rec</code> is considered an <a href="https://nix.dev/anti-patterns/language#rec-expression">anti-pattern</a> and can be replaced with a let-expression.</p>
<h3 id="Argument_Sets">Argument Sets<a class="zola-anchor" href="#Argument_Sets" aria-label="Anchor link for: Argument_Sets">ðŸ”—</a></h3>
<p>Argument sets are used in functions.</p>
<h2 id="Let-expressions">Let-expressions<a class="zola-anchor" href="#Let-expressions" aria-label="Anchor link for: Let-expressions">ðŸ”—</a></h2>
<p>The <code>let</code> construct adds the variable assignments to the lexical scope of the expression after <code>in</code>:</p>
<pre><code>nix-repl&gt; let a = 3; b = 4; in a + b
7
</code></pre>
<p>Two let expressions, one inside the other:</p>
<pre><code>nix-repl&gt; let a = 3; in let b = 4; in a + b
7
</code></pre>
<p>Nested let expressions can have shadowed variables:</p>
<pre><code>nix-repl&gt; let a = 3; in let a = 8; in a
8
</code></pre>
<h2 id="With-expressions">With-expressions<a class="zola-anchor" href="#With-expressions" aria-label="Anchor link for: With-expressions">ðŸ”—</a></h2>
<p>A with-expression takes a <code>set1</code> and includes symbols from <code>set1</code> in the scope of expression <code>expr2</code>:</p>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">with set1; expr2
</code></pre>
<p>Examples:</p>
<pre><code>nix-repl&gt; longName = { a = 3; b = 4; }
nix-repl&gt; with longName; a + b
7
</code></pre>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">let blah = { x = &quot;foo&quot;; y = &quot;bar&quot;; }; in
  with blah; x + y
</code></pre>
<p>evaluates to &quot;foobar&quot;.</p>
<p>The most common use of <code>with</code> is in conjunction with the import function:</p>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">with (import .&#x2F;definitions.nix); ...
</code></pre>
<p>makes all attributes defined in <code>definitions.nix</code> available as if they were defined locally in a let-expression.</p>
<h2 id="Inheriting_attributes:_inherit">Inheriting attributes: <code>inherit</code><a class="zola-anchor" href="#Inheriting_attributes:_inherit" aria-label="Anchor link for: Inheriting_attributes:_inherit">ðŸ”—</a></h2>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">let x = 123; in
{ inherit x;
  y = 456;
}
</code></pre>
<p>is equivalent to</p>
<pre><code>let x = 123; in
{ &quot;x&quot; = x;
  &quot;y&quot; = 456;
}
</code></pre>
<p>and both evaluate to <code>{ x = 123; y = 456; }</code>.</p>
<p>-- </p>
<p>The following fragment:</p>
<pre><code>inherit x y z;
inherit (src-set) a b c;
</code></pre>
<p>is equivalent to the fragment:</p>
<pre><code>x = x; y = y; z = z;
a = src-set.a; b = src-set.b; c = src-set.c;
</code></pre>
<p>when used while defining local variables in a let-expression or while defining a set.</p>
<h2 id="Functions">Functions<a class="zola-anchor" href="#Functions" aria-label="Anchor link for: Functions">ðŸ”—</a></h2>
<!-- TODO(norman): Continue from here https://nixos.org/manual/nix/stable/expressions/language-constructs.html#functions -->
<h2 id="Conditionals">Conditionals<a class="zola-anchor" href="#Conditionals" aria-label="Anchor link for: Conditionals">ðŸ”—</a></h2>
<pre data-lang="nix" class="language-nix "><code class="language-nix" data-lang="nix">if e1 then e2 else e3
</code></pre>
<p>where <code>e1</code> is an expression that should evaluate to a Boolean value (<code>true</code> or <code>false</code>).</p>
<h2 id="with_expressions"><code>with</code> expressions<a class="zola-anchor" href="#with_expressions" aria-label="Anchor link for: with_expressions">ðŸ”—</a></h2>
<!-- TODO(norman): Add notes about https://nix.dev/anti-patterns/language#with-attrset-expression -->
<h2 id="Operators">Operators<a class="zola-anchor" href="#Operators" aria-label="Anchor link for: Operators">ðŸ”—</a></h2>
<p>The <code>set1 // set2</code> operator is considered an <a href="https://nix.dev/anti-patterns/language#search-path">anti-pattern</a> because a nested set in <code>set1</code> is replaced by a nested set in <code>set2</code>, not merged together. Use the <code>pkgs.lib.recursiveUpdate</code> function instead.</p>
<h1 id="nix-build_command"><code>nix-build</code> command<a class="zola-anchor" href="#nix-build_command" aria-label="Anchor link for: nix-build_command">ðŸ”—</a></h1>
<p>Builds a Nix store derivation from a Nix expression.</p>
<p><a href="https://nixos.org/manual/nix/stable/command-ref/nix-build.html">https://nixos.org/manual/nix/stable/command-ref/nix-build.html</a></p>
<p>Runs:</p>
<ol>
<li><code>nix-instantiate</code> to translate a high-level Nix expression to a low-level store derivation</li>
<li><code>nix-store --realise</code> to build the store derivation</li>
</ol>
<h1 id="Common_Command_Options">Common Command Options<a class="zola-anchor" href="#Common_Command_Options" aria-label="Anchor link for: Common_Command_Options">ðŸ”—</a></h1>
<p><a href="https://nixos.org/manual/nix/stable/command-ref/opt-common.html">https://nixos.org/manual/nix/stable/command-ref/opt-common.html</a></p>
<!-- TODO(norman): Read in this order:

https://nixos.org/guides/nix-pills/functions-and-imports.html

https://scrive.github.io/nix-workshop/

https://github.com/tazjin/nix-1p

https://github.com/justinwoo/nix-shorts/tree/master/posts

https://nix.dev/tutorials/declarative-and-reproducible-developer-environments 





Much later, and just skimming, to confirm you understand:


https://medium.com/@MrJamesFisher/nix-by-example-a0063a1a4c55

https://github.com/humancalico/nix-learning

https://ianthehenry.com/posts/how-to-learn-nix/
-->

    </div>
    
</article>


    <footer>
        <p>
            
<span class="icon-text">
  

  
  <a href="https://twitter.com/normful" aria-label="Open normful Twitter" target="_blank">
    <span class="icon is-large">
      <i class="fab fa-twitter fa-lg" aria-hidden="true" title="Twitter"></i>
    </span>
  </a>
  

  
  <a href="https://github.com/normful" aria-label="Open normful GitHub" target="_blank">
    <span class="icon is-large">
      <i class="fab fa-github fa-lg" aria-hidden="true" title="GitHub"></i>
    </span>
  </a>
  

  
  <a href="https://www.linkedin.com/in/normansue" aria-label="Open normansue LinkedIn" target="_blank">
    <span class="icon is-large">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true" title="LinkedIn"></i>
    </span>
  </a>
  

  

  

  

  

  
  <a href="/atom.xml" aria-label="Open atom xml feed" target="_blank">
    <span class="icon is-large">
      <i class="fas fa-rss fa-lg" aria-hidden="true" title="atom xml feed"></i>
    </span>
  </a>
  

  
</span>

        </p>
        <p>
            
            
        </p>
    </footer>
</div>
</body>
</html>
